<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marstek Venus E - BLE Test Tool</title>
    <meta name="description" content="Web-based battery monitoring tool for Marstek Venus E batteries via Bluetooth Low Energy">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Command Info Modal -->
    <div id="infoModal" class="info-modal">
        <div class="info-modal-content">
            <span class="info-modal-close" onclick="closeInfoModal()">&times;</span>
            <div id="commandDetails" class="command-details"></div>
        </div>
    </div>

    <!-- Disclaimer Modal -->
    <div id="disclaimerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">‚ö†Ô∏è EXPERIMENTAL SOFTWARE WARNING ‚ö†Ô∏è</div>
            
            <div class="disclaimer-text">
                <p><strong>This is highly experimental testing software for Marstek Venus E batteries.</strong></p>
                
                <div class="warning-box">
                    <strong>IMPORTANT WARNINGS:</strong>
                    <ul>
                        <li>This software can send commands to your battery system</li>
                        <li>Some commands may modify battery settings or behavior</li>
                        <li>Improper use could potentially damage your equipment</li>
                        <li>This tool is for advanced users and developers only</li>
                        <li>Use in a controlled environment with proper safety precautions</li>
                    </ul>
                </div>
                
                <p><strong>By continuing, you acknowledge that:</strong></p>
                <ul>
                    <li>You understand the experimental nature of this software</li>
                    <li>You accept full responsibility for any consequences</li>
                    <li>You will not hold the developers liable for any damages</li>
                    <li>You have proper knowledge of battery systems and safety</li>
                    <li>You will use this tool at your own risk</li>
                </ul>
                
                <p><strong>Supported Equipment:</strong> Marstek Venus E batteries with "MST_ACCP" and "MST-TPM" Bluetooth names.</p>
                
                <p><strong>Browser Requirements:</strong> Chrome, Edge, or Opera with Web Bluetooth support.</p>
            </div>
            
            <div class="checkbox-container">
                <input type="checkbox" id="acceptRisk"> 
                <label for="acceptRisk">I understand the risks and agree to proceed at my own responsibility</label>
            </div>
            
            <div class="modal-buttons">
                <button class="btn-decline" onclick="declineAndExit()">‚ùå Exit Safely</button>
                <button class="btn-accept" id="acceptBtn" disabled onclick="acceptAndContinue()">‚úÖ Accept Risk & Continue</button>
            </div>
        </div>
    </div>

    <!-- Main Interface -->
    <div class="main-interface" id="mainInterface">
        <div class="container">
            <h1>üîã Marstek Venus E - BLE Test Tool</h1>
            <p class="subtitle">Advanced BLE monitoring and diagnostics for Marstek battery systems</p>
            
            <!-- Version Links -->
            <div style="text-align: center; margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 5px;">
                <span style="color: #666; font-size: 14px;">üìç You're using: <strong>v2.0.0-beta (Latest)</strong></span>
                <span style="margin: 0 10px;">|</span>
                <a href="https://rweijnen.github.io/marstek-venus-monitor/" style="color: #007bff; text-decoration: none;">
                    üîí Switch to v1.0.0 (Stable)
                </a>
            </div>
            
            <div class="status">
                <span>Status: <span id="status" class="disconnected">Disconnected</span></span>
                <div>
                    <button onclick="connect()" id="connectBtn" class="btn-connect">Connect to Marstek</button>
                    <button onclick="disconnect()" id="disconnectBtn" disabled>Disconnect</button>
                    <button onclick="disconnectAll()" id="disconnectAllBtn" disabled>Disconnect All</button>
                    <button onclick="runAllTests()" id="runAllBtn" disabled>üß™ Run All Tests</button>
                    <button onclick="clearAll()">Clear All</button>
                </div>
            </div>

            <div class="section-caption">
                üìñ <strong>Read Commands:</strong> These commands safely read information from your device including power status, battery data, network configuration, and system logs. No settings are modified.
            </div>
            <div class="command-grid">
                <button onclick="sendCommand(0x03, 'Runtime Info')" disabled data-tooltip="Real-time power flow, temperatures, and system status" class="cmd-button">
                    <span class="cmd-button-text">‚ö° Runtime Info</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('runtime')">i</span>
                </button>
                <button onclick="sendCommand(0x04, 'Device Info')" disabled data-tooltip="Device model, MAC address, and firmware versions" class="cmd-button">
                    <span class="cmd-button-text">üì± Device Info</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('device')">i</span>
                </button>
                <button onclick="sendCommand(0x08, 'WiFi Info')" disabled data-tooltip="Connected WiFi network name (SSID)" class="cmd-button">
                    <span class="cmd-button-text">üì∂ WiFi Info</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('wifi')">i</span>
                </button>
                <button onclick="sendCommand(0x0D, 'System Data')" disabled data-tooltip="System operational parameters" class="cmd-button">
                    <span class="cmd-button-text">üîß System Data</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('system')">i</span>
                </button>
                <button onclick="sendCommand(0x13, 'Error Codes')" disabled data-tooltip="Historical error codes with timestamps" class="cmd-button">
                    <span class="cmd-button-text">üö® Error Codes</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('errors')">i</span>
                </button>
                <button onclick="sendCommand(0x14, 'BMS Data')" disabled data-tooltip="Battery voltages, current, SOC, and cell data" class="cmd-button">
                    <span class="cmd-button-text">üîã BMS Data</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('bms')">i</span>
                </button>
                <button onclick="sendCommand(0x1A, 'Config Data')" disabled data-tooltip="System configuration parameters" class="cmd-button">
                    <span class="cmd-button-text">‚öôÔ∏è Config Data</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('config')">i</span>
                </button>
                <button onclick="sendCommand(0x1C, 'Event Log')" disabled data-tooltip="System event history with timestamps" class="cmd-button">
                    <span class="cmd-button-text">üìù Event Log</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('events')">i</span>
                </button>
                <button onclick="sendMeterIPCommand(0x21, 'Read P1 Meter IP', [0x0B])" disabled data-tooltip="Read P1 meter IP address from device configuration" class="cmd-button">
                    <span class="cmd-button-text">üåê Read P1 Meter IP</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('meterip')">i</span>
                </button>
                <button onclick="sendCommand(0x24, 'Network Info')" disabled data-tooltip="IP address, gateway, subnet mask, DNS" class="cmd-button">
                    <span class="cmd-button-text">üîó Network Info</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('network')">i</span>
                </button>
                <button onclick="sendCommand(0x22, 'Read CT Polling Rate')" disabled data-tooltip="Read current CT meter polling rate setting" class="cmd-button">
                    <span class="cmd-button-text">üìä Read CT Polling Rate</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('ctpollread')">i</span>
                </button>
                <button onclick="sendCommand(0x28, 'Read Local API Status')" disabled data-tooltip="Read current Local API configuration" class="cmd-button">
                    <span class="cmd-button-text">üåê Read Local API Status</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('apiread')">i</span>
                </button>
                <button onclick="sendCommand(0x10, 'Read Configuration')" disabled class="cmd-button" data-tooltip="Read device configuration including server credentials (~80 bytes)">
                    <span class="cmd-button-text">üìã Read Configuration</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('readconfig')">i</span>
                </button>
                <button onclick="sendCommand(0x27, 'Get Power Data Array', [0x1E])" disabled class="cmd-button" data-tooltip="Get array of last 30 power measurements">
                    <span class="cmd-button-text">üìä Get Power Array (30)</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('powerarray')">i</span>
                </button>
                <button onclick="sendCommand(0x0A, 'Get Settings Info')" disabled class="cmd-button" data-tooltip="Get device settings information (80 bytes)">
                    <span class="cmd-button-text">‚öôÔ∏è Get Settings Info</span>
                    <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('settingsinfo')">i</span>
                </button>
            </div>

            <!-- Power Management Commands -->
            <div class="command-section">
                <h3>‚ö° Power Management (Modify Settings)</h3>
                <div class="section-caption">
                    ‚ö†Ô∏è <strong>Power Settings:</strong> These commands modify power output limits and operating modes. Changes take effect immediately and may affect connected loads.
                </div>
                <div class="command-grid">
                    <button onclick="sendCommand(0x15, 'Set 800W Mode', [0x20, 0x03])" disabled class="btn-warning cmd-button" data-tooltip="Set maximum output to 800W">
                        <span class="cmd-button-text">Set 800W Mode</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('power800')">i</span>
                    </button>
                    <button onclick="sendCommand(0x15, 'Set 2500W Mode', [0xC4, 0x09])" disabled class="btn-warning cmd-button" data-tooltip="Set maximum output to 2500W">
                        <span class="cmd-button-text">Set 2500W Mode</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('power2500')">i</span>
                    </button>
                    <button onclick="sendCommand(0x16, 'Set AC Power 2500W', [0xC4, 0x09])" disabled class="btn-warning cmd-button" data-tooltip="Set AC input power limit">
                        <span class="cmd-button-text">Set AC Power 2500W</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('acpower')">i</span>
                    </button>
                    <button onclick="sendCommand(0x17, 'Set Total Power 2500W', [0xC4, 0x09])" disabled class="btn-warning cmd-button" data-tooltip="Set total system power limit">
                        <span class="cmd-button-text">Set Total Power 2500W</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('totalpower')">i</span>
                    </button>
                </div>
            </div>

            <!-- System Configuration Commands -->
            <div class="command-section">
                <h3>‚öôÔ∏è System Configuration (Modify Settings)</h3>
                <div class="section-caption">
                    ‚ö†Ô∏è <strong>System Settings:</strong> These commands change operational modes including EPS (Emergency Power Supply), AC input behavior, and generator control. Settings persist after power cycle.
                </div>
                <div class="command-grid">
                    <button onclick="sendCommand(0x02, 'Set Server Type 0', [0x00])" disabled class="btn-warning cmd-button" data-tooltip="Configure server connection type">
                        <span class="cmd-button-text">Set Server Type 0</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('servertype')">i</span>
                    </button>
                    <button onclick="sendCommand(0x0F, 'Enable EPS', [0x01])" disabled class="btn-warning cmd-button" data-tooltip="Enable Emergency Power Supply mode">
                        <span class="cmd-button-text">Enable EPS</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('epsenable')">i</span>
                    </button>
                    <button onclick="sendCommand(0x0F, 'Disable EPS', [0x00])" disabled class="btn-warning cmd-button" data-tooltip="Disable Emergency Power Supply mode">
                        <span class="cmd-button-text">Disable EPS</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('epsdisable')">i</span>
                    </button>
                    <button onclick="sendCommand(0x0E, 'Enable Auto Mode Change', [0x01])" disabled class="btn-warning cmd-button" data-tooltip="Enable automatic work mode switching">
                        <span class="cmd-button-text">üîÑ Auto Mode ON</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('automode')">i</span>
                    </button>
                    <button onclick="sendCommand(0x0E, 'Disable Auto Mode Change', [0x00])" disabled class="btn-warning cmd-button" data-tooltip="Disable automatic work mode switching">
                        <span class="cmd-button-text">üîÑ Auto Mode OFF</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('automodedis')">i</span>
                    </button>
                    <button onclick="sendCommand(0x23, 'Enable Generator', [0x01])" disabled class="btn-warning cmd-button" data-tooltip="Enable generator input">
                        <span class="cmd-button-text">Enable Generator</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('genenable')">i</span>
                    </button>
                    <button onclick="sendCommand(0x23, 'Disable Generator', [0x00])" disabled class="btn-warning cmd-button" data-tooltip="Disable generator input">
                        <span class="cmd-button-text">Disable Generator</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('gendisable')">i</span>
                    </button>
                    <button onclick="sendCommand(0x28, 'Enable Local API (Port 30000)', [0x01, 0x30, 0x75])" disabled class="btn-warning cmd-button" data-tooltip="Enable local API on default port 30000">
                        <span class="cmd-button-text">Enable Local API (30000)</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('apienable30000')">i</span>
                    </button>
                    <button onclick="setLocalApiPort()" disabled class="btn-warning cmd-button" data-tooltip="Enable local API with custom port number">
                        <span class="cmd-button-text">Enable Local API (Custom Port)</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('apicustom')">i</span>
                    </button>
                    <button onclick="sendCommand(0x28, 'Disable Local API', [0x00, 0x00, 0x00])" disabled class="btn-warning cmd-button" data-tooltip="Disable local API access">
                        <span class="cmd-button-text">Disable Local API</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('apidisable')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Set CT Polling Rate: 0', [0x00])" disabled class="btn-warning cmd-button" data-tooltip="Set CT meter polling rate to 0 (fastest)">
                        <span class="cmd-button-text">CT Polling: Rate 0 (Fastest)</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('ctpoll0')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Set CT Polling Rate: 1', [0x01])" disabled class="btn-warning cmd-button" data-tooltip="Set CT meter polling rate to 1 (medium)">
                        <span class="cmd-button-text">CT Polling: Rate 1 (Medium)</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('ctpoll1')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Set CT Polling Rate: 2', [0x02])" disabled class="btn-warning cmd-button" data-tooltip="Set CT meter polling rate to 2 (slowest)">
                        <span class="cmd-button-text">CT Polling: Rate 2 (Slowest)</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('ctpoll2')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Set CT Polling Rate: 3', [0x03])" disabled class="btn-warning cmd-button" data-tooltip="Set CT meter polling rate to 3 (extended/custom)">
                        <span class="cmd-button-text">CT Polling: Rate 3 (Extended)</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('ctpoll3')">i</span>
                    </button>
                    <button onclick="sendConfigWriteCommand()" disabled class="btn-danger cmd-button" data-tooltip="Write configuration data with server credentials">
                        <span class="cmd-button-text">üíæ Write Configuration</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('writeconfig')">i</span>
                    </button>
                </div>
            </div>

            <!-- Development/Diagnostic Commands -->
            <div class="command-section">
                <h3>üîß Development & Diagnostics</h3>
                <div class="section-caption">
                    ‚ö†Ô∏è <strong>Advanced:</strong> These commands are for development and diagnostics. Use with caution.
                </div>
                <div class="command-grid">
                    <button onclick="sendCommand(0x0C, 'Enable Dev Mode', [0x0A, 0x0B, 0x0C, 0x01])" disabled class="btn-danger cmd-button" data-tooltip="Enable development mode (requires magic bytes)">
                        <span class="cmd-button-text">üîì Enable Dev Mode</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('devmode')">i</span>
                    </button>
                    <button onclick="sendCommand(0x0C, 'Disable Dev Mode', [0x0A, 0x0B, 0x0C, 0x00])" disabled class="btn-warning cmd-button" data-tooltip="Disable development mode">
                        <span class="cmd-button-text">üîí Disable Dev Mode</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('devmodedisable')">i</span>
                    </button>
                    <button onclick="sendCommand(0x1F, 'Trigger FW Upgrade', [0x0A, 0x0B, 0x0C])" disabled class="btn-danger cmd-button" data-tooltip="Trigger firmware upgrade mode (requires magic bytes)">
                        <span class="cmd-button-text">‚¨ÜÔ∏è FW Upgrade Mode</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('fwupgrade')">i</span>
                    </button>
                    <button onclick="sendCommand(0x1D, 'System Restart')" disabled class="btn-warning cmd-button" data-tooltip="Restart the system">
                        <span class="cmd-button-text">üîÑ System Restart</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('restart')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Parallel Machine Ready', [0x0A, 0x0B, 0x0C, 0x01])" disabled class="btn-danger cmd-button" data-tooltip="Set parallel machine to ready state (requires magic bytes)">
                        <span class="cmd-button-text">üîó Parallel Ready</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('parallelready')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Parallel Machine ON', [0x0A, 0x0B, 0x0C, 0x02])" disabled class="btn-danger cmd-button" data-tooltip="Enable parallel machine operation (requires magic bytes)">
                        <span class="cmd-button-text">üîó Parallel ON</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('parallelon')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Parallel Machine OFF', [0x0A, 0x0B, 0x0C, 0x00])" disabled class="btn-warning cmd-button" data-tooltip="Disable parallel machine operation (requires magic bytes)">
                        <span class="cmd-button-text">üîó Parallel OFF</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('paralleloff')">i</span>
                    </button>
                </div>
            </div>

            <!-- Time/Network Commands -->
            <div class="command-section">
                <h3>üï∞ Time & Network (Modify Settings)</h3>
                <div class="section-caption">
                    ‚ö†Ô∏è <strong>Time & Network:</strong> These commands update device clock and network configuration. IP changes may affect remote monitoring.
                </div>
                <div class="command-grid">
                    <button onclick="setCurrentDateTime()" disabled class="btn-warning cmd-button" data-tooltip="Sync device clock with browser time">
                        <span class="cmd-button-text">Set Current Time</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('settime')">i</span>
                    </button>
                    <button onclick="sendCommand(0x21, 'Write Test IP', [0x0A, 0x31, 0x39, 0x32, 0x2E, 0x31, 0x36, 0x38, 0x2E, 0x31, 0x2E, 0x31])" disabled class="btn-warning cmd-button" data-tooltip="Write test IP 192.168.1.1 to meter config">
                        <span class="cmd-button-text">üåê Write Test IP</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('writemeter')">i</span>
                    </button>
                </div>
            </div>

            <!-- Advanced/Dangerous Commands -->
            <div class="command-section">
                <h3>üîß Advanced Commands (Use with Extreme Caution)</h3>
                <div class="section-caption" style="background: #f8d7da; border-left-color: #dc3545;">
                    üö´ <strong>DANGER ZONE:</strong> These commands can reset the device, enable firmware updates, or configure parallel operation. May cause data loss or require physical access to recover.
                </div>
                <div class="command-grid">
                    <button onclick="sendCommand(0x0C, 'System Reset', [0x0A, 0x0B, 0x0C, 0x01])" disabled class="btn-danger cmd-button" data-tooltip="Restart the device immediately">
                        <span class="cmd-button-text">‚ö†Ô∏è System Reset</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('reset')">i</span>
                    </button>
                    <button onclick="sendCommand(0x1F, 'Upgrade Mode', [0x0A, 0x0B, 0x0C])" disabled class="btn-danger cmd-button" data-tooltip="Enter firmware upgrade mode">
                        <span class="cmd-button-text">‚ö†Ô∏è Upgrade Mode</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('upgrade')">i</span>
                    </button>
                    <button onclick="sendCommand(0x20, 'Parallel Ready', [0x0A, 0x0B, 0x0C, 0x01])" disabled class="btn-danger cmd-button" data-tooltip="Configure for parallel operation">
                        <span class="cmd-button-text">‚ö†Ô∏è Parallel Ready</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('parallel')">i</span>
                    </button>
                </div>
            </div>
            
            <!-- OTA Firmware Update (EXPERIMENTAL) -->
            <div class="command-section">
                <h3>üî• OTA Firmware Update (EXTREMELY DANGEROUS)</h3>
                <div class="section-caption" style="background: #721c24; color: white; border-left-color: #f5c6cb;">
                    ‚ö†Ô∏è <strong>EXTREME DANGER:</strong> OTA firmware updates can permanently brick your device! Only use if you have a backup and recovery method. This is reverse-engineered and experimental.
                </div>
                <div class="command-grid">
                    <input type="file" id="firmwareFile" accept=".bin" style="display: none;" onchange="handleFirmwareFile(event)">
                    <button onclick="document.getElementById('firmwareFile').click()" disabled class="btn-danger cmd-button" data-tooltip="Select .bin firmware file to upload">
                        <span class="cmd-button-text">üìÅ Select Firmware</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('otasize')">i</span>
                    </button>
                    <button onclick="performOTAUpdate()" disabled class="btn-danger cmd-button" id="otaStartBtn" data-tooltip="Start complete OTA firmware upload process">
                        <span class="cmd-button-text">‚ö° Start OTA Update</span>
                        <span class="info-icon" onclick="event.stopPropagation(); showCommandInfo('otaactivate')">i</span>
                    </button>
                </div>
                <div id="otaFileInfo" style="margin-top: 10px; padding: 8px; background: #f8f9fa; border-radius: 4px; font-size: 14px; color: #666;">
                    No firmware file selected
                </div>
                <div id="otaProgressContainer" style="display: none; margin-top: 10px;">
                    <div style="background: #333; border-radius: 5px; overflow: hidden;">
                        <div id="otaProgress" style="width: 0%; height: 20px; background: #28a745; transition: width 0.3s;"></div>
                    </div>
                    <div id="otaStatus" style="margin-top: 5px; color: #888;">Ready to start...</div>
                </div>
            </div>

            <div id="dataDisplay"></div>
            <div id="log" class="log"></div>
            
            <div class="footer">
                <p>
                    <strong>Marstek Venus E Monitor</strong> - Experimental BLE Battery Diagnostics<br>
                    <a href="https://github.com/rweijnen/marstek-venus-monitor" class="github-link" target="_blank">
                        View on GitHub
                    </a> | 
                    <a href="https://github.com/tomquist/hmjs" class="github-link" target="_blank">
                        Original HMJS Project
                    </a>
                </p>
                <p id="versionInfo"><small>Version: Loading...</small></p>
                <p><small>‚ö†Ô∏è Use at your own risk - Experimental software</small></p>
            </div>
        </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="js/ui-controller.js"></script>
    <script src="js/data-parser.js"></script>
    <script src="js/ble-protocol.js"></script>
    <script src="js/integration-test.js"></script>
</body>
</html>